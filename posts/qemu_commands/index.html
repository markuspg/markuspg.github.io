<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Regularly used QEMU invocations | Programming Pilgrim</title>
<meta name="keywords" content="linux, qemu">
<meta name="description" content="This post is nothing more than a quick reference of QEMU commands for different scenarios.
Virtual Machine Image Creation A command to create an image:
qemu-img create -f qcow2 -o nocow=on TestClient.img 64G The -o nocow=on option is valid on Btrfs only and shall avoid degraded performance.
Installing and Running the Guest Operating System The image can then be installed and run with:
qemu-system-x86_64 -cdrom Downloads/debian-10.4.0-amd64-netinst.iso -enable-kvm -hda TestClient.img -k de -m 4096 -name &#39;Test Server&#39; The -cdrom part is only passed on installation.">
<meta name="author" content="">
<link rel="canonical" href="https://markuspg.github.io/posts/qemu_commands/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://markuspg.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://markuspg.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://markuspg.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://markuspg.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://markuspg.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://markuspg.github.io/posts/qemu_commands/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="Regularly used QEMU invocations" />
<meta property="og:description" content="This post is nothing more than a quick reference of QEMU commands for different scenarios.
Virtual Machine Image Creation A command to create an image:
qemu-img create -f qcow2 -o nocow=on TestClient.img 64G The -o nocow=on option is valid on Btrfs only and shall avoid degraded performance.
Installing and Running the Guest Operating System The image can then be installed and run with:
qemu-system-x86_64 -cdrom Downloads/debian-10.4.0-amd64-netinst.iso -enable-kvm -hda TestClient.img -k de -m 4096 -name &#39;Test Server&#39; The -cdrom part is only passed on installation." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://markuspg.github.io/posts/qemu_commands/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-18T14:34:54+02:00" />
<meta property="article:modified_time" content="2020-07-18T14:34:54+02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Regularly used QEMU invocations"/>
<meta name="twitter:description" content="This post is nothing more than a quick reference of QEMU commands for different scenarios.
Virtual Machine Image Creation A command to create an image:
qemu-img create -f qcow2 -o nocow=on TestClient.img 64G The -o nocow=on option is valid on Btrfs only and shall avoid degraded performance.
Installing and Running the Guest Operating System The image can then be installed and run with:
qemu-system-x86_64 -cdrom Downloads/debian-10.4.0-amd64-netinst.iso -enable-kvm -hda TestClient.img -k de -m 4096 -name &#39;Test Server&#39; The -cdrom part is only passed on installation."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://markuspg.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Regularly used QEMU invocations",
      "item": "https://markuspg.github.io/posts/qemu_commands/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Regularly used QEMU invocations",
  "name": "Regularly used QEMU invocations",
  "description": "This post is nothing more than a quick reference of QEMU commands for different scenarios.\nVirtual Machine Image Creation A command to create an image:\nqemu-img create -f qcow2 -o nocow=on TestClient.img 64G The -o nocow=on option is valid on Btrfs only and shall avoid degraded performance.\nInstalling and Running the Guest Operating System The image can then be installed and run with:\nqemu-system-x86_64 -cdrom Downloads/debian-10.4.0-amd64-netinst.iso -enable-kvm -hda TestClient.img -k de -m 4096 -name 'Test Server' The -cdrom part is only passed on installation.",
  "keywords": [
    "linux", "qemu"
  ],
  "articleBody": "This post is nothing more than a quick reference of QEMU commands for different scenarios.\nVirtual Machine Image Creation A command to create an image:\nqemu-img create -f qcow2 -o nocow=on TestClient.img 64G The -o nocow=on option is valid on Btrfs only and shall avoid degraded performance.\nInstalling and Running the Guest Operating System The image can then be installed and run with:\nqemu-system-x86_64 -cdrom Downloads/debian-10.4.0-amd64-netinst.iso -enable-kvm -hda TestClient.img -k de -m 4096 -name 'Test Server' The -cdrom part is only passed on installation. -enable-kvm greatly improves performance, -k de set the keyboard layout, -m 4096 the memory size and the -name 'Test Server' adds a window title which helps telling apart multiple virtual machines.\nSharing a Directory between the Host and the Guest Operating System To share a directory between the host and the guest operating systems the following argument has to be added to the QEMU invocation (the user should be in the qemu group to run the command with elevated privileges):\n-virtfs local,path=/home/maprasser/Downloads,mount_tag=VMTransfer,security_model=none The shared directory can be mounted within the virtual machine with the following command (the /mnt/vm_transfer mount point has to exist already):\nmount -t 9p -o trans=virtio VMTransfer /mnt/vm_transfer ",
  "wordCount" : "195",
  "inLanguage": "en",
  "datePublished": "2020-07-18T14:34:54+02:00",
  "dateModified": "2020-07-18T14:34:54+02:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://markuspg.github.io/posts/qemu_commands/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Programming Pilgrim",
    "logo": {
      "@type": "ImageObject",
      "url": "https://markuspg.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://markuspg.github.io/" accesskey="h" title="Programming Pilgrim (Alt + H)">Programming Pilgrim</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Regularly used QEMU invocations
    </h1>
    <div class="post-meta"><span title='2020-07-18 14:34:54 +0200 CEST'>July 18, 2020</span>

</div>
  </header> 
  <div class="post-content"><p>This post is nothing more than a quick reference of QEMU commands for different scenarios.</p>
<h2 id="virtual-machine-image-creation">Virtual Machine Image Creation<a hidden class="anchor" aria-hidden="true" href="#virtual-machine-image-creation">#</a></h2>
<p>A command to create an image:</p>
<pre><code>qemu-img create -f qcow2 -o nocow=on TestClient.img 64G
</code></pre>
<p>The <code>-o nocow=on</code> option is valid on Btrfs only and shall avoid degraded performance.</p>
<h2 id="installing-and-running-the-guest-operating-system">Installing and Running the Guest Operating System<a hidden class="anchor" aria-hidden="true" href="#installing-and-running-the-guest-operating-system">#</a></h2>
<p>The image can then be installed and run with:</p>
<pre><code>qemu-system-x86_64 -cdrom Downloads/debian-10.4.0-amd64-netinst.iso -enable-kvm -hda TestClient.img -k de -m 4096 -name 'Test Server'
</code></pre>
<p>The <code>-cdrom</code> part is only passed on installation. <code>-enable-kvm</code> greatly improves performance, <code>-k de</code> set the keyboard layout, <code>-m 4096</code> the memory size and the <code>-name 'Test Server'</code> adds a window title which helps telling apart multiple virtual machines.</p>
<h2 id="sharing-a-directory-between-the-host-and-the-guest-operating-system">Sharing a Directory between the Host and the Guest Operating System<a hidden class="anchor" aria-hidden="true" href="#sharing-a-directory-between-the-host-and-the-guest-operating-system">#</a></h2>
<p>To share a directory between the host and the guest operating systems the following argument has to be added to the QEMU invocation (the user should be in the <code>qemu</code> group to run the command with elevated privileges):</p>
<pre><code>-virtfs local,path=/home/maprasser/Downloads,mount_tag=VMTransfer,security_model=none
</code></pre>
<p>The shared directory can be mounted within the virtual machine with the following command (the <code>/mnt/vm_transfer</code> mount point has to exist already):</p>
<pre><code>mount -t 9p -o trans=virtio VMTransfer /mnt/vm_transfer
</code></pre>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://markuspg.github.io/tags/linux/">Linux</a></li>
      <li><a href="https://markuspg.github.io/tags/qemu/">Qemu</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://markuspg.github.io/">Programming Pilgrim</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
